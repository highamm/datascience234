<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>14 Predictive Modeling with knn | STAT 234: Data Science</title>
  <meta name="description" content="This book contains all examples for SLU’s Introduction to Data Science course." />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="14 Predictive Modeling with knn | STAT 234: Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This book contains all examples for SLU’s Introduction to Data Science course." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="14 Predictive Modeling with knn | STAT 234: Data Science" />
  
  <meta name="twitter:description" content="This book contains all examples for SLU’s Introduction to Data Science course." />
  

<meta name="author" content="Matt Higham" />


<meta name="date" content="2021-08-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="strings-with-stringr.html"/>

<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Syllabus and Course Information</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#general-information"><i class="fa fa-check"></i><b>1.1</b> General Information</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#course-information"><i class="fa fa-check"></i><b>1.2</b> Course Information</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#general-course-outcomes"><i class="fa fa-check"></i><b>1.3</b> General Course Outcomes</a>
<ul>
<li class="chapter" data-level="1.3.1" data-path="index.html"><a href="index.html#use-of-r-and-rstudio"><i class="fa fa-check"></i><b>1.3.1</b> Use of <code>R</code> and <code>RStudio</code></a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#how-you-will-be-assessed"><i class="fa fa-check"></i><b>1.4</b> How You Will Be Assessed</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="index.html"><a href="index.html#breakdown"><i class="fa fa-check"></i><b>1.4.1</b> Breakdown</a></li>
<li class="chapter" data-level="1.4.2" data-path="index.html"><a href="index.html#grading-scale"><i class="fa fa-check"></i><b>1.4.2</b> Grading Scale</a></li>
<li class="chapter" data-level="1.4.3" data-path="index.html"><a href="index.html#rules-for-collaboration"><i class="fa fa-check"></i><b>1.4.3</b> Rules for Collaboration</a></li>
<li class="chapter" data-level="1.4.4" data-path="index.html"><a href="index.html#diversity-statement"><i class="fa fa-check"></i><b>1.4.4</b> Diversity Statement</a></li>
<li class="chapter" data-level="1.4.5" data-path="index.html"><a href="index.html#accessibility-statement"><i class="fa fa-check"></i><b>1.4.5</b> Accessibility Statement</a></li>
<li class="chapter" data-level="1.4.6" data-path="index.html"><a href="index.html#academic-dishonesty"><i class="fa fa-check"></i><b>1.4.6</b> Academic Dishonesty</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#tentative-schedule"><i class="fa fa-check"></i><b>1.5</b> Tentative Schedule</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Getting Started with <code>R</code> and <code>R Studio</code></a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#intro-to-r-and-r-studio"><i class="fa fa-check"></i><b>2.1</b> Intro to <code>R</code> and <code>R Studio</code></a></li>
<li class="chapter" data-level="2.2" data-path="intro.html"><a href="intro.html#what-are-r-r-studio-and-r-markdown"><i class="fa fa-check"></i><b>2.2</b> What are <code>R</code>, <code>R Studio</code>, and <code>R Markdown</code>?</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="intro.html"><a href="intro.html#r-packages-and-the-tidyverse"><i class="fa fa-check"></i><b>2.2.1</b> <code>R</code> Packages and the <code>tidyverse</code></a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="intro.html"><a href="intro.html#putting-code-in-a-.rmd-file"><i class="fa fa-check"></i><b>2.3</b> Putting Code in a <code>.Rmd</code> File</a></li>
<li class="chapter" data-level="2.4" data-path="intro.html"><a href="intro.html#alcohol-data-example"><i class="fa fa-check"></i><b>2.4</b> Alcohol Data Example</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="intro.html"><a href="intro.html#exercise-1-1"><i class="fa fa-check"></i><b>2.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="intro.html"><a href="intro.html#athlete-data-example"><i class="fa fa-check"></i><b>2.5</b> Athlete Data Example</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="intro.html"><a href="intro.html#exercise-1-2"><i class="fa fa-check"></i><b>2.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="intro.html"><a href="intro.html#finishing-up-common-errors-in-r"><i class="fa fa-check"></i><b>2.6</b> Finishing Up: Common Errors in <code>R</code></a></li>
<li class="chapter" data-level="2.7" data-path="intro.html"><a href="intro.html#chapexercise-1"><i class="fa fa-check"></i><b>2.7</b> Chapter Exercises</a></li>
<li class="chapter" data-level="2.8" data-path="intro.html"><a href="intro.html#solutions-1"><i class="fa fa-check"></i><b>2.8</b> Exercise Solutions</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>3</b> Plotting with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="3.1" data-path="ggplot2.html"><a href="ggplot2.html#introduction-and-basic-terminology"><i class="fa fa-check"></i><b>3.1</b> Introduction and Basic Terminology</a></li>
<li class="chapter" data-level="3.2" data-path="ggplot2.html"><a href="ggplot2.html#basic-plot-structure"><i class="fa fa-check"></i><b>3.2</b> Basic Plot Structure</a></li>
<li class="chapter" data-level="3.3" data-path="ggplot2.html"><a href="ggplot2.html#graphing-a-single-variable"><i class="fa fa-check"></i><b>3.3</b> Graphing a Single Variable</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="ggplot2.html"><a href="ggplot2.html#histograms-and-frequency-plots-for-a-quantitative-variable"><i class="fa fa-check"></i><b>3.3.1</b> Histograms and Frequency Plots for a Quantitative Variable</a></li>
<li class="chapter" data-level="3.3.2" data-path="ggplot2.html"><a href="ggplot2.html#r-code-style"><i class="fa fa-check"></i><b>3.3.2</b> <code>R</code> Code Style</a></li>
<li class="chapter" data-level="3.3.3" data-path="ggplot2.html"><a href="ggplot2.html#bar-plots-for-a-categorical-variable"><i class="fa fa-check"></i><b>3.3.3</b> Bar Plots for a Categorical Variable</a></li>
<li class="chapter" data-level="3.3.4" data-path="ggplot2.html"><a href="ggplot2.html#exercise-2-1"><i class="fa fa-check"></i><b>3.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="ggplot2.html"><a href="ggplot2.html#graphing-two-quantitative-variables-faceting-and-aes-options"><i class="fa fa-check"></i><b>3.4</b> Graphing Two Quantitative Variables, Faceting, and <code>aes()</code> Options</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="ggplot2.html"><a href="ggplot2.html#scatterplots"><i class="fa fa-check"></i><b>3.4.1</b> Scatterplots</a></li>
<li class="chapter" data-level="3.4.2" data-path="ggplot2.html"><a href="ggplot2.html#aesthetics-in-aes"><i class="fa fa-check"></i><b>3.4.2</b> Aesthetics in <code>aes()</code></a></li>
<li class="chapter" data-level="3.4.3" data-path="ggplot2.html"><a href="ggplot2.html#using-more-than-one-geom"><i class="fa fa-check"></i><b>3.4.3</b> Using More Than One <code>geom()</code></a></li>
<li class="chapter" data-level="3.4.4" data-path="ggplot2.html"><a href="ggplot2.html#line-plots-with-geom_line"><i class="fa fa-check"></i><b>3.4.4</b> Line Plots with <code>geom_line()</code></a></li>
<li class="chapter" data-level="3.4.5" data-path="ggplot2.html"><a href="ggplot2.html#faceting"><i class="fa fa-check"></i><b>3.4.5</b> Faceting</a></li>
<li class="chapter" data-level="3.4.6" data-path="ggplot2.html"><a href="ggplot2.html#exercise-2-2"><i class="fa fa-check"></i><b>3.4.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="ggplot2.html"><a href="ggplot2.html#boxplots-stacked-barplots-and-others"><i class="fa fa-check"></i><b>3.5</b> Boxplots, Stacked Barplots and Others</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="ggplot2.html"><a href="ggplot2.html#graphing-a-quant.-variable-vs.-a-cat.-variable"><i class="fa fa-check"></i><b>3.5.1</b> Graphing a Quant. Variable vs. a Cat. Variable</a></li>
<li class="chapter" data-level="3.5.2" data-path="ggplot2.html"><a href="ggplot2.html#graphing-two-categorical-variables"><i class="fa fa-check"></i><b>3.5.2</b> Graphing Two Categorical Variables</a></li>
<li class="chapter" data-level="3.5.3" data-path="ggplot2.html"><a href="ggplot2.html#exercise-2-3"><i class="fa fa-check"></i><b>3.5.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="ggplot2.html"><a href="ggplot2.html#chapexercise-2"><i class="fa fa-check"></i><b>3.6</b> Chapter Exercises</a></li>
<li class="chapter" data-level="3.7" data-path="ggplot2.html"><a href="ggplot2.html#solutions-2"><i class="fa fa-check"></i><b>3.7</b> Exercise Solutions</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="ggplot2.html"><a href="ggplot2.html#introduction-etc.-s"><i class="fa fa-check"></i><b>3.7.1</b> Introduction etc. S</a></li>
<li class="chapter" data-level="3.7.2" data-path="ggplot2.html"><a href="ggplot2.html#basic-plot-structure-s"><i class="fa fa-check"></i><b>3.7.2</b> Basic Plot Structure S</a></li>
<li class="chapter" data-level="3.7.3" data-path="ggplot2.html"><a href="ggplot2.html#graphing-a-single-variable-s"><i class="fa fa-check"></i><b>3.7.3</b> Graphing a Single Variable S</a></li>
<li class="chapter" data-level="3.7.4" data-path="ggplot2.html"><a href="ggplot2.html#graphing-two-quant.-etc.-s"><i class="fa fa-check"></i><b>3.7.4</b> Graphing Two Quant. etc. S</a></li>
<li class="chapter" data-level="3.7.5" data-path="ggplot2.html"><a href="ggplot2.html#boxplots-stacked-etc.-s"><i class="fa fa-check"></i><b>3.7.5</b> Boxplots, Stacked, etc. S</a></li>
<li class="chapter" data-level="3.7.6" data-path="ggplot2.html"><a href="ggplot2.html#chapexercise-2-S"><i class="fa fa-check"></i><b>3.7.6</b> Chapter Exercises S</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="ggplot2.html"><a href="ggplot2.html#rcode-2"><i class="fa fa-check"></i><b>3.8</b> Non-Exercise <code>R</code> Code</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>4</b> Wrangling with <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="4.1" data-path="dplyr.html"><a href="dplyr.html#mutate-create-variables"><i class="fa fa-check"></i><b>4.1</b> <code>mutate()</code>: Create Variables</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="dplyr.html"><a href="dplyr.html#a-little-more-on-piping"><i class="fa fa-check"></i><b>4.1.1</b> A Little More on Piping</a></li>
<li class="chapter" data-level="4.1.2" data-path="dplyr.html"><a href="dplyr.html#if_else-and-case_when"><i class="fa fa-check"></i><b>4.1.2</b> <code>if_else()</code> and <code>case_when()</code></a></li>
<li class="chapter" data-level="4.1.3" data-path="dplyr.html"><a href="dplyr.html#exercise-3-1"><i class="fa fa-check"></i><b>4.1.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="dplyr.html"><a href="dplyr.html#arrange-select-and-slice-and-filter"><i class="fa fa-check"></i><b>4.2</b> <code>arrange()</code>, <code>select()</code>, and <code>slice()</code>, and <code>filter()</code></a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="dplyr.html"><a href="dplyr.html#arrange-ordering-rows"><i class="fa fa-check"></i><b>4.2.1</b> <code>arrange()</code>: Ordering Rows</a></li>
<li class="chapter" data-level="4.2.2" data-path="dplyr.html"><a href="dplyr.html#select-choose-columns"><i class="fa fa-check"></i><b>4.2.2</b> <code>select()</code> Choose Columns</a></li>
<li class="chapter" data-level="4.2.3" data-path="dplyr.html"><a href="dplyr.html#slice-and-filter-choose-rows"><i class="fa fa-check"></i><b>4.2.3</b> <code>slice()</code> and <code>filter()</code>: Choose Rows</a></li>
<li class="chapter" data-level="4.2.4" data-path="dplyr.html"><a href="dplyr.html#exercise-3-2"><i class="fa fa-check"></i><b>4.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="dplyr.html"><a href="dplyr.html#summarise-and-group_by-create-summaries"><i class="fa fa-check"></i><b>4.3</b> <code>summarise()</code> and <code>group_by()</code>: Create Summaries</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="dplyr.html"><a href="dplyr.html#group_by-groups"><i class="fa fa-check"></i><b>4.3.1</b> <code>group_by()</code>: Groups</a></li>
<li class="chapter" data-level="4.3.2" data-path="dplyr.html"><a href="dplyr.html#exercise-3-3"><i class="fa fa-check"></i><b>4.3.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="dplyr.html"><a href="dplyr.html#missing-values"><i class="fa fa-check"></i><b>4.4</b> Missing Values</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="dplyr.html"><a href="dplyr.html#exercise-3-4"><i class="fa fa-check"></i><b>4.4.1</b> Exercises</a></li>
<li class="chapter" data-level="4.4.2" data-path="dplyr.html"><a href="dplyr.html#removing-missing-values"><i class="fa fa-check"></i><b>4.4.2</b> Removing Missing Values</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="dplyr.html"><a href="dplyr.html#chapexercise-3"><i class="fa fa-check"></i><b>4.5</b> Chapter Exercises</a></li>
<li class="chapter" data-level="4.6" data-path="dplyr.html"><a href="dplyr.html#solutions-3"><i class="fa fa-check"></i><b>4.6</b> Exercise Solutions</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="dplyr.html"><a href="dplyr.html#mutate-s"><i class="fa fa-check"></i><b>4.6.1</b> <code>mutate()</code> S</a></li>
<li class="chapter" data-level="4.6.2" data-path="dplyr.html"><a href="dplyr.html#arrange-select-.-s"><i class="fa fa-check"></i><b>4.6.2</b> <code>arrange()</code>, <code>select()</code>, …. S</a></li>
<li class="chapter" data-level="4.6.3" data-path="dplyr.html"><a href="dplyr.html#summarise-and-group_by-s"><i class="fa fa-check"></i><b>4.6.3</b> <code>summarise()</code> and <code>group_by()</code> S</a></li>
<li class="chapter" data-level="4.6.4" data-path="dplyr.html"><a href="dplyr.html#missing-values-s"><i class="fa fa-check"></i><b>4.6.4</b> Missing Values S</a></li>
<li class="chapter" data-level="4.6.5" data-path="dplyr.html"><a href="dplyr.html#chapexercise-3-S"><i class="fa fa-check"></i><b>4.6.5</b> Chapter Exercises S</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="dplyr.html"><a href="dplyr.html#rcode-3"><i class="fa fa-check"></i><b>4.7</b> Non-Exercise <code>R</code> Code</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html"><i class="fa fa-check"></i><b>5</b> Tidying with <code>tidyr</code></a>
<ul>
<li class="chapter" data-level="5.1" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#what-is-tidy-data"><i class="fa fa-check"></i><b>5.1</b> What is Tidy Data?</a></li>
<li class="chapter" data-level="5.2" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#separate-and-unite-columns"><i class="fa fa-check"></i><b>5.2</b> <code>separate()</code> and <code>unite()</code> Columns</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#separate-a-column"><i class="fa fa-check"></i><b>5.2.1</b> <code>separate()</code> a Column</a></li>
<li class="chapter" data-level="5.2.2" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#unite-columns"><i class="fa fa-check"></i><b>5.2.2</b> <code>unite()</code> Columns</a></li>
<li class="chapter" data-level="5.2.3" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#column-names-and-rename"><i class="fa fa-check"></i><b>5.2.3</b> Column Names and <code>rename()</code></a></li>
<li class="chapter" data-level="5.2.4" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#exercise-4-1"><i class="fa fa-check"></i><b>5.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#reshaping-with-pivot_"><i class="fa fa-check"></i><b>5.3</b> Reshaping with <code>pivot_()</code></a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#pivot_longer-to-gather-columns"><i class="fa fa-check"></i><b>5.3.1</b> <code>pivot_longer()</code> to Gather Columns</a></li>
<li class="chapter" data-level="5.3.2" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#pivot_wider-to-spread-to-multiple-columns"><i class="fa fa-check"></i><b>5.3.2</b> <code>pivot_wider()</code> to Spread to Multiple Columns</a></li>
<li class="chapter" data-level="5.3.3" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#exercise-4-2"><i class="fa fa-check"></i><b>5.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#skimming-data-with-skimr"><i class="fa fa-check"></i><b>5.4</b> Skimming Data with <code>skimr</code></a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#exercises-exercise-4-3"><i class="fa fa-check"></i><b>5.4.1</b> Exercises {exercise-4-3}</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#chapexercise-4"><i class="fa fa-check"></i><b>5.5</b> Chapter Exercises</a></li>
<li class="chapter" data-level="5.6" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#solutions-4"><i class="fa fa-check"></i><b>5.6</b> Exercise Solutions</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#what-is-tidy-data-s"><i class="fa fa-check"></i><b>5.6.1</b> What is Tidy Data? S</a></li>
<li class="chapter" data-level="5.6.2" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#separate-and-unite-s"><i class="fa fa-check"></i><b>5.6.2</b> <code>separate()</code> and <code>unite()</code> S</a></li>
<li class="chapter" data-level="5.6.3" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#pivot_-s"><i class="fa fa-check"></i><b>5.6.3</b> <code>pivot_()</code> S</a></li>
<li class="chapter" data-level="5.6.4" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#skimming-data-with-skimr-s"><i class="fa fa-check"></i><b>5.6.4</b> Skimming Data with <code>skimr()</code> S</a></li>
<li class="chapter" data-level="5.6.5" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#chapexercise-4-S"><i class="fa fa-check"></i><b>5.6.5</b> Chapter Exercises S</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="tidying-with-tidyr.html"><a href="tidying-with-tidyr.html#rcode-4"><i class="fa fa-check"></i><b>5.7</b> Non-Exercise <code>R</code> Code</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html"><i class="fa fa-check"></i><b>6</b> Communication with <code>RMarkdown</code></a>
<ul>
<li class="chapter" data-level="6.1" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#reproducbility"><i class="fa fa-check"></i><b>6.1</b> Reproducbility</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#r-scripts-vs.-r-markdown"><i class="fa fa-check"></i><b>6.1.1</b> <code>R</code> Scripts vs. <code>R Markdown</code></a></li>
<li class="chapter" data-level="6.1.2" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#spell-checking"><i class="fa fa-check"></i><b>6.1.2</b> Spell-Checking</a></li>
<li class="chapter" data-level="6.1.3" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#exercise-5-1"><i class="fa fa-check"></i><b>6.1.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#r-markdown-files"><i class="fa fa-check"></i><b>6.2</b> <code>R Markdown</code> Files</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#code-chunk-options"><i class="fa fa-check"></i><b>6.2.1</b> Code Chunk Options</a></li>
<li class="chapter" data-level="6.2.2" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#figures-and-tables"><i class="fa fa-check"></i><b>6.2.2</b> Figures and Tables</a></li>
<li class="chapter" data-level="6.2.3" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#non-code-options"><i class="fa fa-check"></i><b>6.2.3</b> Non-Code Options</a></li>
<li class="chapter" data-level="6.2.4" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#yaml"><i class="fa fa-check"></i><b>6.2.4</b> YAML</a></li>
<li class="chapter" data-level="6.2.5" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#exercise-5-2"><i class="fa fa-check"></i><b>6.2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#ggplot2-communication"><i class="fa fa-check"></i><b>6.3</b> <code>ggplot2</code> Communication</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#change-labels-and-titles"><i class="fa fa-check"></i><b>6.3.1</b> Change Labels and Titles</a></li>
<li class="chapter" data-level="6.3.2" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#changing-x-and-y-axis-limits"><i class="fa fa-check"></i><b>6.3.2</b> Changing x and y axis Limits</a></li>
<li class="chapter" data-level="6.3.3" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#changing-a-colour-scale"><i class="fa fa-check"></i><b>6.3.3</b> Changing A Colour Scale</a></li>
<li class="chapter" data-level="6.3.4" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#labeling-points-or-lines-of-interest"><i class="fa fa-check"></i><b>6.3.4</b> Labeling Points or Lines of Interest</a></li>
<li class="chapter" data-level="6.3.5" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#plot-themes"><i class="fa fa-check"></i><b>6.3.5</b> Plot Themes</a></li>
<li class="chapter" data-level="6.3.6" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#exercise-5-3"><i class="fa fa-check"></i><b>6.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#chapexercise-5"><i class="fa fa-check"></i><b>6.4</b> Chapter Exercises</a></li>
<li class="chapter" data-level="6.5" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#solutions-5"><i class="fa fa-check"></i><b>6.5</b> Exercise Solutions</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#reproducibility-s"><i class="fa fa-check"></i><b>6.5.1</b> Reproducibility S</a></li>
<li class="chapter" data-level="6.5.2" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#r-markdown-files-s"><i class="fa fa-check"></i><b>6.5.2</b> <code>R Markdown</code> Files S</a></li>
<li class="chapter" data-level="6.5.3" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#ggplot2-communication-s"><i class="fa fa-check"></i><b>6.5.3</b> <code>ggplot2</code> Communication S</a></li>
<li class="chapter" data-level="6.5.4" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#chapexercise-5-S"><i class="fa fa-check"></i><b>6.5.4</b> Chapter Exercises S</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="communication-with-rmarkdown.html"><a href="communication-with-rmarkdown.html#rcode-5"><i class="fa fa-check"></i><b>6.6</b> Non-Exercise <code>R</code> Code</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i><b>7</b> <code>R</code> Basics</a>
<ul>
<li class="chapter" data-level="7.1" data-path="r-basics.html"><a href="r-basics.html#variable-classes-in-r"><i class="fa fa-check"></i><b>7.1</b> Variable Classes in <code>R</code></a>
<ul>
<li class="chapter" data-level="7.1.1" data-path="r-basics.html"><a href="r-basics.html#referencing-variables-and-using-str"><i class="fa fa-check"></i><b>7.1.1</b> Referencing Variables and Using <code>str()</code></a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="r-basics.html"><a href="r-basics.html#classes-in-detail"><i class="fa fa-check"></i><b>7.2</b> Classes in Detail</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="r-basics.html"><a href="r-basics.html#chr-and-fct-class"><i class="fa fa-check"></i><b>7.2.1</b> <code>&lt;chr&gt;</code> and <code>&lt;fct&gt;</code> Class</a></li>
<li class="chapter" data-level="7.2.2" data-path="r-basics.html"><a href="r-basics.html#date-class"><i class="fa fa-check"></i><b>7.2.2</b> <code>&lt;date&gt;</code> Class</a></li>
<li class="chapter" data-level="7.2.3" data-path="r-basics.html"><a href="r-basics.html#dbl-and-int-class"><i class="fa fa-check"></i><b>7.2.3</b> <code>&lt;dbl&gt;</code> and <code>&lt;int&gt;</code> Class</a></li>
<li class="chapter" data-level="7.2.4" data-path="r-basics.html"><a href="r-basics.html#lgl-class"><i class="fa fa-check"></i><b>7.2.4</b> <code>&lt;lgl&gt;</code> Class</a></li>
<li class="chapter" data-level="7.2.5" data-path="r-basics.html"><a href="r-basics.html#exercise-6-2"><i class="fa fa-check"></i><b>7.2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="r-basics.html"><a href="r-basics.html#object-types-and-subsetting"><i class="fa fa-check"></i><b>7.3</b> Object Types and Subsetting</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="r-basics.html"><a href="r-basics.html#tibble-and-data.frame"><i class="fa fa-check"></i><b>7.3.1</b> <code>tibble</code> and <code>data.frame</code></a></li>
<li class="chapter" data-level="7.3.2" data-path="r-basics.html"><a href="r-basics.html#vectors"><i class="fa fa-check"></i><b>7.3.2</b> Vectors</a></li>
<li class="chapter" data-level="7.3.3" data-path="r-basics.html"><a href="r-basics.html#lists"><i class="fa fa-check"></i><b>7.3.3</b> Lists</a></li>
<li class="chapter" data-level="7.3.4" data-path="r-basics.html"><a href="r-basics.html#exercise-6-3"><i class="fa fa-check"></i><b>7.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="r-basics.html"><a href="r-basics.html#piping-with-magrittr"><i class="fa fa-check"></i><b>7.4</b> Piping with <code>magrittr</code></a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="r-basics.html"><a href="r-basics.html#when-you-cant-use-the-pipe"><i class="fa fa-check"></i><b>7.4.1</b> When You Can’t Use the Pipe</a></li>
<li class="chapter" data-level="7.4.2" data-path="r-basics.html"><a href="r-basics.html#exercise-6-4"><i class="fa fa-check"></i><b>7.4.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="r-basics.html"><a href="r-basics.html#r-cleanup-other-topics"><i class="fa fa-check"></i><b>7.5</b> <code>R</code> Cleanup: Other Topics</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="r-basics.html"><a href="r-basics.html#r-projects-and-working-directories"><i class="fa fa-check"></i><b>7.5.1</b> <code>R Projects</code> and Working Directories</a></li>
<li class="chapter" data-level="7.5.2" data-path="r-basics.html"><a href="r-basics.html#r-studio-server"><i class="fa fa-check"></i><b>7.5.2</b> <code>R Studio</code> Server</a></li>
<li class="chapter" data-level="7.5.3" data-path="r-basics.html"><a href="r-basics.html#installing-r-packages"><i class="fa fa-check"></i><b>7.5.3</b> Installing <code>R</code> Packages</a></li>
<li class="chapter" data-level="7.5.4" data-path="r-basics.html"><a href="r-basics.html#exercise-6-5"><i class="fa fa-check"></i><b>7.5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="r-basics.html"><a href="r-basics.html#chapexercise-6"><i class="fa fa-check"></i><b>7.6</b> Chapter Exercises</a></li>
<li class="chapter" data-level="7.7" data-path="r-basics.html"><a href="r-basics.html#solutions-6"><i class="fa fa-check"></i><b>7.7</b> Exercise Solutions</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="r-basics.html"><a href="r-basics.html#variable-classes-s"><i class="fa fa-check"></i><b>7.7.1</b> Variable Classes S</a></li>
<li class="chapter" data-level="7.7.2" data-path="r-basics.html"><a href="r-basics.html#classes-in-detail-s"><i class="fa fa-check"></i><b>7.7.2</b> Classes in Detail S</a></li>
<li class="chapter" data-level="7.7.3" data-path="r-basics.html"><a href="r-basics.html#object-types-s"><i class="fa fa-check"></i><b>7.7.3</b> Object Types S</a></li>
<li class="chapter" data-level="7.7.4" data-path="r-basics.html"><a href="r-basics.html#piping-s"><i class="fa fa-check"></i><b>7.7.4</b> Piping S</a></li>
<li class="chapter" data-level="7.7.5" data-path="r-basics.html"><a href="r-basics.html#other-r-topics-s"><i class="fa fa-check"></i><b>7.7.5</b> Other R Topics S</a></li>
<li class="chapter" data-level="7.7.6" data-path="r-basics.html"><a href="r-basics.html#chapexercise-6-S"><i class="fa fa-check"></i><b>7.7.6</b> Chapter Exercises S</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="r-basics.html"><a href="r-basics.html#rcode-6"><i class="fa fa-check"></i><b>7.8</b> Non-Exercise <code>R</code> Code</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html"><i class="fa fa-check"></i><b>8</b> Factors with <code>forcats</code></a>
<ul>
<li class="chapter" data-level="8.1" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#change-factor-levels"><i class="fa fa-check"></i><b>8.1</b> Change Factor Levels</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#fct_recode-to-rename-levels"><i class="fa fa-check"></i><b>8.1.1</b> <code>fct_recode()</code> to Rename Levels</a></li>
<li class="chapter" data-level="8.1.2" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#collapsing-many-levels-into-fewer-levels-with-fct_collapse"><i class="fa fa-check"></i><b>8.1.2</b> Collapsing Many Levels Into Fewer Levels with <code>fct_collapse()</code></a></li>
<li class="chapter" data-level="8.1.3" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#exercise-7-1"><i class="fa fa-check"></i><b>8.1.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#reorder-factor-levels"><i class="fa fa-check"></i><b>8.2</b> Reorder Factor Levels</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#change-the-order-of-levels-by-a-quantitative-variable-with-fct_reorder"><i class="fa fa-check"></i><b>8.2.1</b> Change the Order of Levels by a Quantitative Variable with <code>fct_reorder()</code></a></li>
<li class="chapter" data-level="8.2.2" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#re-leveling-by-two-quantitative-variables-with-fct_reorder2"><i class="fa fa-check"></i><b>8.2.2</b> Re-Leveling By Two Quantitative Variables with <code>fct_reorder2()</code></a></li>
<li class="chapter" data-level="8.2.3" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#reordering-levels-manually-with-fct_relevel"><i class="fa fa-check"></i><b>8.2.3</b> Reordering Levels Manually with <code>fct_relevel()</code></a></li>
<li class="chapter" data-level="8.2.4" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#exercise-7-2"><i class="fa fa-check"></i><b>8.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#chapexercise-7"><i class="fa fa-check"></i><b>8.3</b> Chapter Exercises</a></li>
<li class="chapter" data-level="8.4" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#solutions-7"><i class="fa fa-check"></i><b>8.4</b> Exercise Solutions</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#change-factor-levels-s"><i class="fa fa-check"></i><b>8.4.1</b> Change Factor Levels S</a></li>
<li class="chapter" data-level="8.4.2" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#reorder-factor-levels-s"><i class="fa fa-check"></i><b>8.4.2</b> Reorder Factor Levels S</a></li>
<li class="chapter" data-level="8.4.3" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#chapexercise-7-S"><i class="fa fa-check"></i><b>8.4.3</b> Chapter Exercises S</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="factors-with-forcats.html"><a href="factors-with-forcats.html#rcode-7"><i class="fa fa-check"></i><b>8.5</b> Non-Exercise <code>R</code> Code</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html"><i class="fa fa-check"></i><b>9</b> Reprexes and Import</a>
<ul>
<li class="chapter" data-level="9.1" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#reprexes-and-tibble"><i class="fa fa-check"></i><b>9.1</b> Reprexes and <code>tibble</code></a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#exercise-8-1"><i class="fa fa-check"></i><b>9.1.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#readr-to-read-in-data"><i class="fa fa-check"></i><b>9.2</b> <code>readr</code> to Read in Data</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#read_csv-options"><i class="fa fa-check"></i><b>9.2.1</b> <code>read_csv()</code> Options</a></li>
<li class="chapter" data-level="9.2.2" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#exercise-8-2"><i class="fa fa-check"></i><b>9.2.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#data-scraping-with-rvest"><i class="fa fa-check"></i><b>9.3</b> Data Scraping with <code>rvest</code></a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#exercise-8-3"><i class="fa fa-check"></i><b>9.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#json-files-with-jsonlite"><i class="fa fa-check"></i><b>9.4</b> JSON Files with <code>jsonlite</code></a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#everything-working-well"><i class="fa fa-check"></i><b>9.4.1</b> Everything Working Well</a></li>
<li class="chapter" data-level="9.4.2" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#things-arent-always-so-easy"><i class="fa fa-check"></i><b>9.4.2</b> Things Aren’t Always So Easy</a></li>
<li class="chapter" data-level="9.4.3" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#exercise-8-4"><i class="fa fa-check"></i><b>9.4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#chapexercise-8"><i class="fa fa-check"></i><b>9.5</b> Chapter Exercises</a></li>
<li class="chapter" data-level="9.6" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#solutions-8"><i class="fa fa-check"></i><b>9.6</b> Exercise Solutions</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#reprexes-and-tibble-s"><i class="fa fa-check"></i><b>9.6.1</b> Reprexes and <code>tibble</code> S</a></li>
<li class="chapter" data-level="9.6.2" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#readr-s"><i class="fa fa-check"></i><b>9.6.2</b> <code>readr</code> S</a></li>
<li class="chapter" data-level="9.6.3" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#rvest-and-data-scraping-s"><i class="fa fa-check"></i><b>9.6.3</b> <code>rvest</code> and Data Scraping S</a></li>
<li class="chapter" data-level="9.6.4" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#json-with-jsonlite-s"><i class="fa fa-check"></i><b>9.6.4</b> JSON with <code>jsonlite</code> S</a></li>
<li class="chapter" data-level="9.6.5" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#chapexercise-8-S"><i class="fa fa-check"></i><b>9.6.5</b> Chapter Exercises S</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="reprexes-and-import.html"><a href="reprexes-and-import.html#rcode-8"><i class="fa fa-check"></i><b>9.7</b> Non-Exercise <code>R</code> Code</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="data-ethics.html"><a href="data-ethics.html"><i class="fa fa-check"></i><b>10</b> Data Ethics</a>
<ul>
<li class="chapter" data-level="10.1" data-path="data-ethics.html"><a href="data-ethics.html#ethical-examples"><i class="fa fa-check"></i><b>10.1</b> Ethical Examples</a>
<ul>
<li class="chapter" data-level="10.1.1" data-path="data-ethics.html"><a href="data-ethics.html#exercise-9-1"><i class="fa fa-check"></i><b>10.1.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="data-ethics.html"><a href="data-ethics.html#data-privacy"><i class="fa fa-check"></i><b>10.2</b> Data Privacy</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="data-ethics.html"><a href="data-ethics.html#exercise-9-2"><i class="fa fa-check"></i><b>10.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="data-ethics.html"><a href="data-ethics.html#hypothesis-generation-vs.-confirmation"><i class="fa fa-check"></i><b>10.3</b> Hypothesis Generation vs. Confirmation</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="data-ethics.html"><a href="data-ethics.html#exercise-9-3"><i class="fa fa-check"></i><b>10.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="data-ethics.html"><a href="data-ethics.html#chapexercise-9"><i class="fa fa-check"></i><b>10.4</b> Chapter Exercises</a></li>
<li class="chapter" data-level="10.5" data-path="data-ethics.html"><a href="data-ethics.html#solutions-9"><i class="fa fa-check"></i><b>10.5</b> Exercise Solutions</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html"><i class="fa fa-check"></i><b>11</b> Merging with <code>dplyr</code></a>
<ul>
<li class="chapter" data-level="11.1" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#stacking-rows-and-appending-columns"><i class="fa fa-check"></i><b>11.1</b> Stacking Rows and Appending Columns</a>
<ul>
<li class="chapter" data-level="11.1.1" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#stacking-with-bind_rows"><i class="fa fa-check"></i><b>11.1.1</b> Stacking with <code>bind_rows()</code></a></li>
<li class="chapter" data-level="11.1.2" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#binding-columns-with-bind_cols"><i class="fa fa-check"></i><b>11.1.2</b> Binding Columns with <code>bind_cols()</code></a></li>
<li class="chapter" data-level="11.1.3" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#exercise-10-1"><i class="fa fa-check"></i><b>11.1.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#mutating-joins"><i class="fa fa-check"></i><b>11.2</b> Mutating Joins</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#keep-all-rows-of-data-set-1-with-left_join"><i class="fa fa-check"></i><b>11.2.1</b> Keep All Rows of Data Set 1 with <code>left_join()</code></a></li>
<li class="chapter" data-level="11.2.2" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#keep-all-rows-of-data-set-2-with-right_join"><i class="fa fa-check"></i><b>11.2.2</b> Keep All Rows of Data Set 2 with <code>right_join()</code></a></li>
<li class="chapter" data-level="11.2.3" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#keep-all-rows-of-both-data-sets-with-full_join"><i class="fa fa-check"></i><b>11.2.3</b> Keep All Rows of Both Data Sets with <code>full_join()</code></a></li>
<li class="chapter" data-level="11.2.4" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#keep-only-rows-with-matching-keys-with-inner_join"><i class="fa fa-check"></i><b>11.2.4</b> Keep Only Rows with Matching Keys with <code>inner_join()</code></a></li>
<li class="chapter" data-level="11.2.5" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#which-xxxx_join"><i class="fa fa-check"></i><b>11.2.5</b> Which <code>xxxx_join()</code>?</a></li>
<li class="chapter" data-level="11.2.6" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#the-importance-of-a-good-key"><i class="fa fa-check"></i><b>11.2.6</b> The Importance of a Good Key</a></li>
<li class="chapter" data-level="11.2.7" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#exercise-10-2"><i class="fa fa-check"></i><b>11.2.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#filtering-joins"><i class="fa fa-check"></i><b>11.3</b> Filtering Joins</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#filtering-with-anti_join"><i class="fa fa-check"></i><b>11.3.1</b> Filtering with <code>anti_join()</code></a></li>
<li class="chapter" data-level="11.3.2" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#exercise-10-3"><i class="fa fa-check"></i><b>11.3.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#a-note-on-sql"><i class="fa fa-check"></i><b>11.4</b> A Note on SQL</a></li>
<li class="chapter" data-level="11.5" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#chapexercise-10"><i class="fa fa-check"></i><b>11.5</b> Chapter Exercises</a></li>
<li class="chapter" data-level="11.6" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#solutions-10"><i class="fa fa-check"></i><b>11.6</b> Exercise Solutions</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#bind_rows-and-bind_cols-s"><i class="fa fa-check"></i><b>11.6.1</b> <code>bind_rows()</code> and <code>bind_cols()</code> S</a></li>
<li class="chapter" data-level="11.6.2" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#mutating-joins-s"><i class="fa fa-check"></i><b>11.6.2</b> Mutating Joins S</a></li>
<li class="chapter" data-level="11.6.3" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#filtering-joins-s"><i class="fa fa-check"></i><b>11.6.3</b> Filtering Joins S</a></li>
<li class="chapter" data-level="11.6.4" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#chapexercise-10-S"><i class="fa fa-check"></i><b>11.6.4</b> Chapter Exercises S</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="merging-with-dplyr.html"><a href="merging-with-dplyr.html#rcode-10"><i class="fa fa-check"></i><b>11.7</b> Non-Exercise <code>R</code> Code</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html"><i class="fa fa-check"></i><b>12</b> Dates with <code>lubridate</code></a>
<ul>
<li class="chapter" data-level="12.1" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html#converting-variables-to-date"><i class="fa fa-check"></i><b>12.1</b> Converting Variables to <code>&lt;date&gt;</code></a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html#from-chr-to-date"><i class="fa fa-check"></i><b>12.1.1</b> From <code>&lt;chr&gt;</code> to <code>&lt;date&gt;</code></a></li>
<li class="chapter" data-level="12.1.2" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html#making-a-date-variable-from-date-components"><i class="fa fa-check"></i><b>12.1.2</b> Making a <code>&lt;date&gt;</code> variable from Date Components</a></li>
<li class="chapter" data-level="12.1.3" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html#exercise-11-1"><i class="fa fa-check"></i><b>12.1.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html#functions-for-date-variables"><i class="fa fa-check"></i><b>12.2</b> Functions for <code>&lt;date&gt;</code> Variables</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html#year-month-and-mday"><i class="fa fa-check"></i><b>12.2.1</b> <code>year()</code>, <code>month()</code>, and <code>mday()</code></a></li>
<li class="chapter" data-level="12.2.2" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html#yday-and-wday"><i class="fa fa-check"></i><b>12.2.2</b> <code>yday()</code> and <code>wday()</code></a></li>
<li class="chapter" data-level="12.2.3" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html#exercise-11-2"><i class="fa fa-check"></i><b>12.2.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html#chapexercise-11"><i class="fa fa-check"></i><b>12.3</b> Chapter Exercises</a></li>
<li class="chapter" data-level="12.4" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html#solutions-11"><i class="fa fa-check"></i><b>12.4</b> Exercise Solutions</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html#converting-variables-to-date-s"><i class="fa fa-check"></i><b>12.4.1</b> Converting Variables to <code>&lt;date&gt;</code> S</a></li>
<li class="chapter" data-level="12.4.2" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html#functions-for-date-variables-s"><i class="fa fa-check"></i><b>12.4.2</b> Functions for <code>&lt;date&gt;</code> Variables S</a></li>
<li class="chapter" data-level="12.4.3" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html#chapexercise-11-S"><i class="fa fa-check"></i><b>12.4.3</b> Chapter Exercises S</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="dates-with-lubridate.html"><a href="dates-with-lubridate.html#rcode-11"><i class="fa fa-check"></i><b>12.5</b> Non-Exercise <code>R</code> Code</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="strings-with-stringr.html"><a href="strings-with-stringr.html"><i class="fa fa-check"></i><b>13</b> Strings with <code>stringr</code></a>
<ul>
<li class="chapter" data-level="13.1" data-path="strings-with-stringr.html"><a href="strings-with-stringr.html#friday-friday"><i class="fa fa-check"></i><b>13.1</b> Friday, Friday</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="strings-with-stringr.html"><a href="strings-with-stringr.html#exercise-12-1"><i class="fa fa-check"></i><b>13.1.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="strings-with-stringr.html"><a href="strings-with-stringr.html#add-second-example-here"><i class="fa fa-check"></i><b>13.2</b> Add Second Example Here</a></li>
<li class="chapter" data-level="13.3" data-path="strings-with-stringr.html"><a href="strings-with-stringr.html#chapexercise-12"><i class="fa fa-check"></i><b>13.3</b> Chapter Exercises</a></li>
<li class="chapter" data-level="13.4" data-path="strings-with-stringr.html"><a href="strings-with-stringr.html#solutions-12"><i class="fa fa-check"></i><b>13.4</b> Exercise Solutions</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="strings-with-stringr.html"><a href="strings-with-stringr.html#friday-friday-s"><i class="fa fa-check"></i><b>13.4.1</b> Friday, Friday S</a></li>
<li class="chapter" data-level="13.4.2" data-path="strings-with-stringr.html"><a href="strings-with-stringr.html#second-example-s"><i class="fa fa-check"></i><b>13.4.2</b> Second Example S</a></li>
<li class="chapter" data-level="13.4.3" data-path="strings-with-stringr.html"><a href="strings-with-stringr.html#chapexercise-12-S"><i class="fa fa-check"></i><b>13.4.3</b> Chapter Exercises S</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="strings-with-stringr.html"><a href="strings-with-stringr.html#rcode-12"><i class="fa fa-check"></i><b>13.5</b> Non-Exercise <code>R</code> Code</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html"><i class="fa fa-check"></i><b>14</b> Predictive Modeling with knn</a>
<ul>
<li class="chapter" data-level="14.1" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#introduction-to-classification"><i class="fa fa-check"></i><b>14.1</b> Introduction to Classification</a>
<ul>
<li class="chapter" data-level="14.1.1" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#training-and-test-data"><i class="fa fa-check"></i><b>14.1.1</b> Training and Test Data</a></li>
<li class="chapter" data-level="14.1.2" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#exercise-13-1"><i class="fa fa-check"></i><b>14.1.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#knn-introduction"><i class="fa fa-check"></i><b>14.2</b> knn Introduction</a>
<ul>
<li class="chapter" data-level="14.2.1" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#knn-with-k-1-and-1-predictor"><i class="fa fa-check"></i><b>14.2.1</b> knn with k = 1 and 1 Predictor</a></li>
<li class="chapter" data-level="14.2.2" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#knn-with-k-1-and-one-predictor"><i class="fa fa-check"></i><b>14.2.2</b> knn with k &gt; 1 and One Predictor</a></li>
<li class="chapter" data-level="14.2.3" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#knn-with-k-1-and-more-than-one-predictor"><i class="fa fa-check"></i><b>14.2.3</b> knn with k &gt; 1 and More Than One Predictor</a></li>
<li class="chapter" data-level="14.2.4" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#scaling-predictor-variables-before-using-knn"><i class="fa fa-check"></i><b>14.2.4</b> Scaling Predictor Variables before Using knn</a></li>
<li class="chapter" data-level="14.2.5" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#exercise-13-2"><i class="fa fa-check"></i><b>14.2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#choosing-predictors-and-k"><i class="fa fa-check"></i><b>14.3</b> Choosing Predictors and k</a>
<ul>
<li class="chapter" data-level="14.3.1" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#the-confusion-matrix"><i class="fa fa-check"></i><b>14.3.1</b> The Confusion Matrix</a></li>
<li class="chapter" data-level="14.3.2" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#using-knn-in-r"><i class="fa fa-check"></i><b>14.3.2</b> Using knn in <code>R</code></a></li>
<li class="chapter" data-level="14.3.3" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#exercise-13-3"><i class="fa fa-check"></i><b>14.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#chapexercise-13"><i class="fa fa-check"></i><b>14.4</b> Chapter Exercises</a></li>
<li class="chapter" data-level="14.5" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#solutions-13"><i class="fa fa-check"></i><b>14.5</b> Exercise Solutions</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#introduction-to-classification-s"><i class="fa fa-check"></i><b>14.5.1</b> Introduction to Classification S</a></li>
<li class="chapter" data-level="14.5.2" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#knn-introduction-s"><i class="fa fa-check"></i><b>14.5.2</b> knn Introduction S</a></li>
<li class="chapter" data-level="14.5.3" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#choosing-predictors-and-k-s"><i class="fa fa-check"></i><b>14.5.3</b> Choosing Predictors and k S</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="predictive-modeling-with-knn.html"><a href="predictive-modeling-with-knn.html#rcode-13"><i class="fa fa-check"></i><b>14.6</b> Non-Exercise <code>R</code> Code</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">STAT 234: Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="predictive-modeling-with-knn" class="section level1" number="14">
<h1><span class="header-section-number">14</span> Predictive Modeling with knn</h1>
<p><strong>Goals</strong></p>
<ul>
<li>explain why it’s necessary to use <em>training data</em> and <em>test data</em> when building a predictive model.</li>
<li>describe the k-nearest neighbors (knn) procedure.</li>
<li>interpret a <em>confusion matrix</em>.</li>
<li>use knn to predict a the level of a categorical response variable.</li>
</ul>
<div id="introduction-to-classification" class="section level2" number="14.1">
<h2><span class="header-section-number">14.1</span> Introduction to Classification</h2>
<p><strong>k-nearest neighbors</strong> (or <strong>knn</strong>) is an introductory supervised machine learning algorithm, most commonly used as a classification algorithm. Classification refers to prediction of a categorical response variable with two or more categories. For example, for a data set with SLU students, we might be interested in predicting whether or not each student graduates in four years (so the response has two categories: graduates in 4 years or doesn’t). We might want to classify this response based on various student characteristics like anticipated major, GPA, standardized test scores, etc. knn can also be used to predict a quantitative response, but we’ll focus on categorical responses throughout this section.</p>
<p>If you’ve had STAT 213, you might try to draw some parallels to knn and classification using logistic regression. Note, however, that logistic regression required the response to have <strong>two</strong> levels while knn can classify a response variable that has <strong>two or more</strong> levels.</p>
<p>To introduce this, we will be using <code>pokemon_full.csv</code> data. Pokemon have different Types: we will use <code>Type</code> as a categorical response that we are interested in predicting. For simplicity, we will only use Pokemon’s primary type and we will only use <strong>4</strong> different types:</p>
<div class="sourceCode" id="cb669"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb669-1"><a href="predictive-modeling-with-knn.html#cb669-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1119</span>)</span>
<span id="cb669-2"><a href="predictive-modeling-with-knn.html#cb669-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb669-3"><a href="predictive-modeling-with-knn.html#cb669-3" aria-hidden="true" tabindex="-1"></a>pokemon <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/pokemon_full.csv&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb669-4"><a href="predictive-modeling-with-knn.html#cb669-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Steel&quot;</span>, <span class="st">&quot;Dark&quot;</span>, <span class="st">&quot;Fire&quot;</span>, <span class="st">&quot;Ice&quot;</span>))</span></code></pre></div>
<p>Our goal is to develop a k-nearest-neighbors model that is able to classify/predict Pokemon <code>Type</code> from a set of predictors, like Pokemon <code>HP</code>, <code>Attack</code>, <code>Defense</code>, etc.</p>
<div id="training-and-test-data" class="section level3" number="14.1.1">
<h3><span class="header-section-number">14.1.1</span> Training and Test Data</h3>
<p>In order to develop our knn model (note that we still haven’t discussed what knn actually is yet!), we first need to discuss terms that applies to almost <strong>all</strong> predictive/classification modeling: training and test data. A <strong>training</strong> data set is a subset of the full data set used to fit various models. For the example below, the training data set will be just 15 observations for pedagogical purposes. More commonly, the training data set will contain 50%-80% of the observations in the full data set.</p>
<p>A <strong>test</strong> data set consists of the remaining 20%-50% of the observations not in the training data set. A test data set is used to assess different the performances of various models that were fit using the training data set. Why do we need to do this division? Using the full data set for both training a model and testing that model is “cheating:” the model will perform better than it should because we are using each observation twice: once for fitting and once for testing. Having a separate test data set that wasn’t used to fit the model gives the model a more “fair” test, as these observations are supposed to be new data that the model hasn’t yet seen.</p>
<p>The following code uses that <code>sample_n()</code> function to randomly select 15 observations to be in the training data set. <code>anti_join()</code> then makes a test data set without the 15 pokemon in the training data set.</p>
<div class="sourceCode" id="cb670"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb670-1"><a href="predictive-modeling-with-knn.html#cb670-1" aria-hidden="true" tabindex="-1"></a>train_sample <span class="ot">&lt;-</span> pokemon <span class="sc">%&gt;%</span></span>
<span id="cb670-2"><a href="predictive-modeling-with-knn.html#cb670-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="dv">15</span>)</span>
<span id="cb670-3"><a href="predictive-modeling-with-knn.html#cb670-3" aria-hidden="true" tabindex="-1"></a>test_sample <span class="ot">&lt;-</span> <span class="fu">anti_join</span>(pokemon, train_sample)</span>
<span id="cb670-4"><a href="predictive-modeling-with-knn.html#cb670-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb670-5"><a href="predictive-modeling-with-knn.html#cb670-5" aria-hidden="true" tabindex="-1"></a>train_sample <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 14
##      X1 Name   Type     HP Attack Defense Speed SpAtk SpDef Generation Legendary
##   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt; &lt;lgl&gt;    
## 1   491 Darkr… Dark     70     90      90   125   135    90          4 TRUE     
## 2   136 Flare… Fire     65    130      60    65    95   110          1 FALSE    
## 3   571 Zoroa… Dark     60    105      60   105   120    60          5 FALSE    
## 4   221 Pilos… Ice     100    100      80    50    60    60          2 FALSE    
## 5   668 Pyroar Fire     86     68      72   106   109    66          6 FALSE    
## 6   262 Might… Dark     70     90      70    70    60    60          3 FALSE    
## # … with 3 more variables: height &lt;dbl&gt;, weight &lt;dbl&gt;, base_experience &lt;dbl&gt;</code></pre>
<div class="sourceCode" id="cb672"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb672-1"><a href="predictive-modeling-with-knn.html#cb672-1" aria-hidden="true" tabindex="-1"></a>test_sample <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 14
##      X1 Name   Type     HP Attack Defense Speed SpAtk SpDef Generation Legendary
##   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt; &lt;lgl&gt;    
## 1     4 Charm… Fire     39     52      43    65    60    50          1 FALSE    
## 2     5 Charm… Fire     58     64      58    80    80    65          1 FALSE    
## 3    37 Vulpix Fire     38     41      40    65    50    65          1 FALSE    
## 4    38 Ninet… Fire     73     76      75   100    81   100          1 FALSE    
## 5    58 Growl… Fire     55     70      45    60    70    50          1 FALSE    
## 6    59 Arcan… Fire     90    110      80    95   100    80          1 FALSE    
## # … with 3 more variables: height &lt;dbl&gt;, weight &lt;dbl&gt;, base_experience &lt;dbl&gt;</code></pre>
<p>The ideas of a training data set and test data set are pervasive in predictive and classification models, including models not related to knn. Note that we are going to do this method because it’s the simplest: if you wanted to take this a step further, you’d repeat the training and test process 5 or 10 times, using what’s known as <strong>k-fold cross-validation.</strong></p>
</div>
<div id="exercise-13-1" class="section level3" number="14.1.2">
<h3><span class="header-section-number">14.1.2</span> Exercises</h3>
<p>Exercises marked with an * indicate that the exercise has a solution at the end of the chapter at <a href="predictive-modeling-with-knn.html#solutions-13">14.5</a>.</p>
<ol style="list-style-type: decimal">
<li>Explain what <code>anti_join()</code> joins on when <code>by</code> isn’t specified and why not specifying a <code>by</code> argument works for this example.</li>
</ol>
</div>
</div>
<div id="knn-introduction" class="section level2" number="14.2">
<h2><span class="header-section-number">14.2</span> knn Introduction</h2>
<div id="knn-with-k-1-and-1-predictor" class="section level3" number="14.2.1">
<h3><span class="header-section-number">14.2.1</span> knn with k = 1 and 1 Predictor</h3>
<p>Suppose that we have just those <strong>15</strong> pokemon in our training data set. We want to predict <code>Type</code> from just one predictor, <code>Defense</code>. Below is a plot that shows the defenses of the 15 pokemon in our training data set, and has points coloured by Type and with different shapes for Type.</p>
<div class="sourceCode" id="cb674"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb674-1"><a href="predictive-modeling-with-knn.html#cb674-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> train_sample, <span class="fu">aes</span>(<span class="at">x =</span> Defense, <span class="at">y =</span> <span class="dv">1</span>, <span class="at">colour =</span> Type, <span class="at">shape =</span> Type)) <span class="sc">+</span></span>
<span id="cb674-2"><a href="predictive-modeling-with-knn.html#cb674-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span>  <span class="fu">theme</span>(<span class="at">axis.title.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb674-3"><a href="predictive-modeling-with-knn.html#cb674-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb674-4"><a href="predictive-modeling-with-knn.html#cb674-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>())</span></code></pre></div>
<p><img src="13-knn_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>We see from the plot that <code>Steel</code> type Pokemon tend to have pretty high defense values. Now suppose that we want to predict the <code>Type</code> for one of the Pokemon in our test data set, <code>Dialga</code>. We know that Dialga has a <code>Defense</code> stat of 120: the plot below shows Dialga marked with a large black X.</p>
<div class="sourceCode" id="cb675"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb675-1"><a href="predictive-modeling-with-knn.html#cb675-1" aria-hidden="true" tabindex="-1"></a>dialga <span class="ot">&lt;-</span> test_sample <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">63</span>)</span>
<span id="cb675-2"><a href="predictive-modeling-with-knn.html#cb675-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> train_sample, <span class="fu">aes</span>(<span class="at">x =</span> Defense, <span class="at">y =</span> <span class="dv">1</span>, <span class="at">colour =</span> Type, <span class="at">shape =</span> Type)) <span class="sc">+</span></span>
<span id="cb675-3"><a href="predictive-modeling-with-knn.html#cb675-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span>  <span class="fu">theme</span>(<span class="at">axis.title.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb675-4"><a href="predictive-modeling-with-knn.html#cb675-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb675-5"><a href="predictive-modeling-with-knn.html#cb675-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb675-6"><a href="predictive-modeling-with-knn.html#cb675-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dialga, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">shape =</span> <span class="dv">4</span>, <span class="at">size =</span> <span class="dv">7</span>)</span></code></pre></div>
<p><img src="13-knn_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
<p>What would your prediction for <code>Dialga</code> be? Why? According to knn with <code>k = 1</code>, we would predict <code>Dialga</code> to be <code>Fire</code> type. <code>k = 1</code> means that we are using the <strong>1st</strong> nearest neighbor: in this case the point that is closest to <code>Dialga</code> is a green triangle, corresponding to a <code>Fire</code> type Pokemon.</p>
</div>
<div id="knn-with-k-1-and-one-predictor" class="section level3" number="14.2.2">
<h3><span class="header-section-number">14.2.2</span> knn with k &gt; 1 and One Predictor</h3>
<p>But, we might not necessarily want to predict the response value based on the single nearest neighbor. <code>Dialga</code> is also near many purple plus signs: should those factor in at all? We can extend <code>knn</code> to different values for k. For example, <span class="math inline">\(k = 3\)</span> looks at the 3 nearest neighbors, and assigns a prediction as the category that appears the <strong>most</strong> among those 3 nearest neighbors.</p>
<p>Using <code>k = 3</code>, what would the prediction for Dialga be? Why?</p>
</div>
<div id="knn-with-k-1-and-more-than-one-predictor" class="section level3" number="14.2.3">
<h3><span class="header-section-number">14.2.3</span> knn with k &gt; 1 and More Than One Predictor</h3>
<p>We can increase the number of predictors in our <code>knn</code> model as well. We can generally include as many predictors as we would like, but visualizing becomes challenging with more than 2 predictors and nearly impossible with more than 3 predictors. For the case of two predictors, suppose that we want to use Defense and Speed as our predictors for Type. <code>Dialga</code>, the Pokemon we want to predict for, is again marked with a large black X.</p>
<div class="sourceCode" id="cb676"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb676-1"><a href="predictive-modeling-with-knn.html#cb676-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> train_sample, <span class="fu">aes</span>(<span class="at">x =</span> Defense, <span class="at">y =</span> Speed, <span class="at">colour =</span> Type, <span class="at">shape =</span> Type)) <span class="sc">+</span></span>
<span id="cb676-2"><a href="predictive-modeling-with-knn.html#cb676-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb676-3"><a href="predictive-modeling-with-knn.html#cb676-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dialga, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">shape =</span> <span class="dv">4</span>, <span class="at">size =</span> <span class="dv">5</span>)</span></code></pre></div>
<p><img src="13-knn_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>For <span class="math inline">\(k = 1\)</span>, we would predict the <code>Dialga</code> is Steel, as the closest point is the purple <code>+</code> sign in the top-left corner of the graph. For <span class="math inline">\(k = 3\)</span>, what <code>Type</code> would you predict for Dialga? For this question, it’s a little hard to tell which three points are closest to <code>Dialga</code> without computing the distances numerically, which is something we will let <code>R</code> do with the <code>knn()</code> function.</p>
</div>
<div id="scaling-predictor-variables-before-using-knn" class="section level3" number="14.2.4">
<h3><span class="header-section-number">14.2.4</span> Scaling Predictor Variables before Using knn</h3>
<p>In general, we want to scale any quantitative predictors when using knn because it relies on distances between points in its predictions. This is easiest to see with an example. Suppose, in our Pokemon example, that we want to use <code>height</code> and <code>weight</code> as our predictors in the <code>knn</code> model. We just have 2 observations in our training data set: a Dark Type pokemon with a height of 15 centimeters and a weight of 505 pounds, and a Fire Type Pokemon with a height of 9 centimeters and a weight of 250 pounds.</p>
<div class="sourceCode" id="cb677"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb677-1"><a href="predictive-modeling-with-knn.html#cb677-1" aria-hidden="true" tabindex="-1"></a>train_tiny <span class="ot">&lt;-</span> train_sample <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb677-2"><a href="predictive-modeling-with-knn.html#cb677-2" aria-hidden="true" tabindex="-1"></a>newobs <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">height =</span> <span class="dv">15</span>, <span class="at">weight =</span> <span class="dv">350</span>, <span class="at">Type =</span> <span class="st">&quot;Unknown&quot;</span>)</span>
<span id="cb677-3"><a href="predictive-modeling-with-knn.html#cb677-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> train_tiny, <span class="fu">aes</span>(<span class="at">x =</span> height, <span class="at">y =</span> weight, <span class="at">shape =</span> Type)) <span class="sc">+</span></span>
<span id="cb677-4"><a href="predictive-modeling-with-knn.html#cb677-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">5</span>, <span class="fu">aes</span>(<span class="at">colour =</span> Type)) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">17</span>)) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">200</span>, <span class="dv">550</span>)) <span class="sc">+</span></span>
<span id="cb677-5"><a href="predictive-modeling-with-knn.html#cb677-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> newobs, <span class="at">shape =</span> <span class="dv">4</span>, <span class="at">size =</span> <span class="dv">10</span>)</span></code></pre></div>
<p><img src="13-knn_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>On the plot is also given a Pokemon in our test data set that we wish to predict the <code>Type</code> of, marked with a black X. Upon visual inspection, with <code>k = 1</code>, it looks like we would classify this pokemon as Dark. However, the units of weight and height are on very different scales. We will compute the actual distances in class to see if the conclusion from the calculation matches with the visual conclusion.</p>
<p><br></p>
<p>To get around this issue, it is customary to scale all quantitative predictors before applying knn. One method of doing this is applying</p>
<p><span class="math display">\[
scaled_x = \frac{x - min(x)}{max(x) - min(x)}
\]</span></p>
<p>For example, scaling <code>weight</code> for the 15 original pokemon:</p>
<div class="sourceCode" id="cb678"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb678-1"><a href="predictive-modeling-with-knn.html#cb678-1" aria-hidden="true" tabindex="-1"></a>train_sample <span class="sc">%&gt;%</span> <span class="fu">select</span>(weight) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 1
##   weight
##    &lt;dbl&gt;
## 1    505
## 2    250
## 3    811
## 4    558
## 5    815
## 6    370</code></pre>
<p>puts all weights between 0 and 1:</p>
<div class="sourceCode" id="cb680"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb680-1"><a href="predictive-modeling-with-knn.html#cb680-1" aria-hidden="true" tabindex="-1"></a>train_sample <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">weight_s =</span> (weight <span class="sc">-</span> <span class="fu">min</span>(weight)) <span class="sc">/</span> </span>
<span id="cb680-2"><a href="predictive-modeling-with-knn.html#cb680-2" aria-hidden="true" tabindex="-1"></a>                          (<span class="fu">max</span>(weight) <span class="sc">-</span> <span class="fu">min</span>(weight))) <span class="sc">%&gt;%</span></span>
<span id="cb680-3"><a href="predictive-modeling-with-knn.html#cb680-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(weight_s) <span class="sc">%&gt;%</span></span>
<span id="cb680-4"><a href="predictive-modeling-with-knn.html#cb680-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code></pre></div>
<pre><code>## # A tibble: 6 x 1
##   weight_s
##      &lt;dbl&gt;
## 1   0.187 
## 2   0.0835
## 3   0.312 
## 4   0.209 
## 5   0.314 
## 6   0.132</code></pre>
<p>If we do the same with <code>height</code>, then the variables will contribute more “equally” to the distance metric used in knn.</p>
<p>The code below scales all numeric variables in a data set, using the <code>across()</code> function. <code>across()</code> applies a transformation to every column in a data set that satisfies the condition given in the <code>where</code> argument.</p>
<div class="sourceCode" id="cb682"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb682-1"><a href="predictive-modeling-with-knn.html#cb682-1" aria-hidden="true" tabindex="-1"></a><span class="do">## ?across</span></span>
<span id="cb682-2"><a href="predictive-modeling-with-knn.html#cb682-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pander)</span>
<span id="cb682-3"><a href="predictive-modeling-with-knn.html#cb682-3" aria-hidden="true" tabindex="-1"></a>train_sample <span class="sc">%&gt;%</span></span>
<span id="cb682-4"><a href="predictive-modeling-with-knn.html#cb682-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> (.x <span class="sc">-</span> <span class="fu">min</span>(.x)) <span class="sc">/</span></span>
<span id="cb682-5"><a href="predictive-modeling-with-knn.html#cb682-5" aria-hidden="true" tabindex="-1"></a>                                 (<span class="fu">max</span>(.x) <span class="sc">-</span> <span class="fu">min</span>(.x)))) <span class="sc">%&gt;%</span></span>
<span id="cb682-6"><a href="predictive-modeling-with-knn.html#cb682-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code></pre></div>
<pre><code>## # A tibble: 3 x 14
##      X1 Name   Type     HP Attack Defense Speed SpAtk SpDef Generation Legendary
##   &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt; &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;      &lt;dbl&gt; &lt;lgl&gt;    
## 1 0.720 Darkr… Dark  0.417  0.444     0.4 1     1     0.658        0.6 TRUE     
## 2 0.193 Flare… Fire  0.333  0.889     0.1 0.368 0.619 0.921        0   FALSE    
## 3 0.838 Zoroa… Dark  0.25   0.611     0.1 0.789 0.857 0.263        0.8 FALSE    
## # … with 3 more variables: height &lt;dbl&gt;, weight &lt;dbl&gt;, base_experience &lt;dbl&gt;</code></pre>
</div>
<div id="exercise-13-2" class="section level3" number="14.2.5">
<h3><span class="header-section-number">14.2.5</span> Exercises</h3>
<p>Exercises marked with an * indicate that the exercise has a solution at the end of the chapter at <a href="predictive-modeling-with-knn.html#solutions-13">14.5</a>.</p>
<ol style="list-style-type: decimal">
<li>* Consider again the toy example with just two observations in the training data set and unscaled weight and height as predictors.</li>
</ol>
<div class="sourceCode" id="cb684"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb684-1"><a href="predictive-modeling-with-knn.html#cb684-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> train_tiny, <span class="fu">aes</span>(<span class="at">x =</span> height, <span class="at">y =</span> weight, <span class="at">shape =</span> Type)) <span class="sc">+</span></span>
<span id="cb684-2"><a href="predictive-modeling-with-knn.html#cb684-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">5</span>, <span class="fu">aes</span>(<span class="at">colour =</span> Type)) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">17</span>)) <span class="sc">+</span></span>
<span id="cb684-3"><a href="predictive-modeling-with-knn.html#cb684-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">200</span>, <span class="dv">550</span>)) <span class="sc">+</span></span>
<span id="cb684-4"><a href="predictive-modeling-with-knn.html#cb684-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> newobs, <span class="at">shape =</span> <span class="dv">4</span>, <span class="at">size =</span> <span class="dv">10</span>)</span></code></pre></div>
<p><img src="13-knn_files/figure-html/unnamed-chunk-10-1.png" width="672" /></p>
<p>The actual (height, weight) coordinates of the Fire pokemon are (9, 250), the actual coordinates of the Dark pokemon are (15, 505), and the actual coordinates of the test pokemon are (15, 350). We mentioned that, visually, the pokemon looks “closer” to the Dark type pokemon. Verify that this is <strong>not</strong> actually the case by computing the actual distances numerically.</p>
<ol start="2" style="list-style-type: decimal">
<li><p>* After scaling according to the formula in this section, the coordinates (height, weight) of the Fire pokemon are (0, 0) and the coordinates of the Dark pokemon are (1, 1). (Since there are only two observations, the formula doesn’t give any output between 0 and 1 for this tiny example). The scaled coordinates for the test pokemon are (1, 0.39). Verify that, after scaling, the test pokemon is “closer” to the Dark type pokemon by numerically computing distances.</p></li>
<li><p>Consider again the example with 15 pokemon in the training data set and a single predictor, <code>Defense</code>.</p></li>
</ol>
<div class="sourceCode" id="cb685"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb685-1"><a href="predictive-modeling-with-knn.html#cb685-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> train_sample, <span class="fu">aes</span>(<span class="at">x =</span> Defense, <span class="at">y =</span> <span class="dv">1</span>, <span class="at">colour =</span> Type, <span class="at">shape =</span> Type)) <span class="sc">+</span></span>
<span id="cb685-2"><a href="predictive-modeling-with-knn.html#cb685-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span>  <span class="fu">theme</span>(<span class="at">axis.title.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb685-3"><a href="predictive-modeling-with-knn.html#cb685-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb685-4"><a href="predictive-modeling-with-knn.html#cb685-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb685-5"><a href="predictive-modeling-with-knn.html#cb685-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dialga, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">shape =</span> <span class="dv">4</span>, <span class="at">size =</span> <span class="dv">7</span>)</span></code></pre></div>
<p><img src="13-knn_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>With k = 2, there is a tie between Fire and Steel. Come up with a way in which you might break ties in a knn algorithm.</p>
<ol start="4" style="list-style-type: decimal">
<li><p>Explain what knn would use a prediction for all test observations if k equals the number of observations in the training data set.</p></li>
<li><p>What are some advantages for making k smaller and what are some advantages for making k larger?</p></li>
</ol>
</div>
</div>
<div id="choosing-predictors-and-k" class="section level2" number="14.3">
<h2><span class="header-section-number">14.3</span> Choosing Predictors and k</h2>
<p>We now know how knn classifies observations in the test data set, but how do we choose which predictors should be used by the knn algorithm? And how do we choose the number of neighbors, k? We want to measure how “good” models with different predictors and different k’s do, but we first need to define what “good” means.</p>
<div id="the-confusion-matrix" class="section level3" number="14.3.1">
<h3><span class="header-section-number">14.3.1</span> The Confusion Matrix</h3>
<p>One definition of “good” in the classification context is a model that has a high proportion of correct predictions in the test data set. This should make some intuitive sense, as we would hope that a “good” model correctly classifies most <code>Dark</code> pokemon as <code>Dark</code>, most <code>Fire</code> pokemon as <code>Fire</code>, etc.</p>
<p>In order to examine the performance of a particular model, we’ll create a <strong>confusion matrix</strong> that shows the results of the model’s classification on observations in the test data set. Note that in STAT 213, we didn’t call this a confusion matrix; we instead called this a classification table.</p>
<p>The following video explains confusion matrices in more detail and should also cement the ideas of training and test data. <a href="https://www.youtube.com/watch?v=Kdsp6soqA7o" target="_blank">https://www.youtube.com/watch?v=Kdsp6soqA7o</a>.</p>
</div>
<div id="using-knn-in-r" class="section level3" number="14.3.2">
<h3><span class="header-section-number">14.3.2</span> Using knn in <code>R</code></h3>
<p>To make a confusion matrix for a model using the pokemon data set, we first need to obtain predictions from a model. We’ll use the <code>class</code> library to fit a knn model to the pokemon data. Note that, instead of having 15 Pokemon in our training data set, we now have <strong>70</strong> pokemon to give a more reasonable number. The test set has the remaining <strong>50</strong> pokemon.</p>
<p>The following code chunk sets a seed so that we all get the same training and test samples, scales all numeric variables in the pokemon data set, and then randomly selects 70 pokemon to be in the training sample.</p>
<div class="sourceCode" id="cb686"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb686-1"><a href="predictive-modeling-with-knn.html#cb686-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb686-2"><a href="predictive-modeling-with-knn.html#cb686-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">11232020</span>) <span class="do">## run this line so that you get the same </span></span>
<span id="cb686-3"><a href="predictive-modeling-with-knn.html#cb686-3" aria-hidden="true" tabindex="-1"></a><span class="do">## results as I do!</span></span>
<span id="cb686-4"><a href="predictive-modeling-with-knn.html#cb686-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb686-5"><a href="predictive-modeling-with-knn.html#cb686-5" aria-hidden="true" tabindex="-1"></a><span class="do">## scale the quantitative predictors</span></span>
<span id="cb686-6"><a href="predictive-modeling-with-knn.html#cb686-6" aria-hidden="true" tabindex="-1"></a>pokemon_scaled <span class="ot">&lt;-</span> pokemon <span class="sc">%&gt;%</span></span>
<span id="cb686-7"><a href="predictive-modeling-with-knn.html#cb686-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> (.x <span class="sc">-</span> <span class="fu">min</span>(.x)) <span class="sc">/</span></span>
<span id="cb686-8"><a href="predictive-modeling-with-knn.html#cb686-8" aria-hidden="true" tabindex="-1"></a>                                 (<span class="fu">max</span>(.x) <span class="sc">-</span> <span class="fu">min</span>(.x)))) </span>
<span id="cb686-9"><a href="predictive-modeling-with-knn.html#cb686-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb686-10"><a href="predictive-modeling-with-knn.html#cb686-10" aria-hidden="true" tabindex="-1"></a>train_sample_2 <span class="ot">&lt;-</span> pokemon_scaled <span class="sc">%&gt;%</span></span>
<span id="cb686-11"><a href="predictive-modeling-with-knn.html#cb686-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="dv">70</span>)</span>
<span id="cb686-12"><a href="predictive-modeling-with-knn.html#cb686-12" aria-hidden="true" tabindex="-1"></a>test_sample_2 <span class="ot">&lt;-</span> <span class="fu">anti_join</span>(pokemon_scaled, train_sample_2)</span></code></pre></div>
<pre><code>## Joining, by = c(&quot;X1&quot;, &quot;Name&quot;, &quot;Type&quot;, &quot;HP&quot;, &quot;Attack&quot;, &quot;Defense&quot;, &quot;Speed&quot;, &quot;SpAtk&quot;, &quot;SpDef&quot;, &quot;Generation&quot;, &quot;Legendary&quot;, &quot;height&quot;, &quot;weight&quot;, &quot;base_experience&quot;)</code></pre>
<p>The first knn model we will investigate will have <code>HP</code>, <code>Attack</code>, <code>Defense</code>, and <code>Speed</code> as predictors. The <code>class</code> library can fit knn models with a <code>knn()</code> function but requires the training and test data sets to have <strong>only</strong> the predictors that we want to use to fit the model. The <code>knn()</code> function also requires the response variable, <code>Type</code>, to be given as a vector.</p>
<div class="sourceCode" id="cb688"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb688-1"><a href="predictive-modeling-with-knn.html#cb688-1" aria-hidden="true" tabindex="-1"></a><span class="do">## install.packages(&quot;class&quot;)</span></span>
<span id="cb688-2"><a href="predictive-modeling-with-knn.html#cb688-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(class)</span>
<span id="cb688-3"><a href="predictive-modeling-with-knn.html#cb688-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-4"><a href="predictive-modeling-with-knn.html#cb688-4" aria-hidden="true" tabindex="-1"></a><span class="do">## create a data frame that only has the predictors</span></span>
<span id="cb688-5"><a href="predictive-modeling-with-knn.html#cb688-5" aria-hidden="true" tabindex="-1"></a><span class="do">## that we will use</span></span>
<span id="cb688-6"><a href="predictive-modeling-with-knn.html#cb688-6" aria-hidden="true" tabindex="-1"></a>train_small <span class="ot">&lt;-</span> train_sample_2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(HP, Attack, Defense, Speed)</span>
<span id="cb688-7"><a href="predictive-modeling-with-knn.html#cb688-7" aria-hidden="true" tabindex="-1"></a>test_small <span class="ot">&lt;-</span> test_sample_2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(HP, Attack, Defense, Speed)</span>
<span id="cb688-8"><a href="predictive-modeling-with-knn.html#cb688-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb688-9"><a href="predictive-modeling-with-knn.html#cb688-9" aria-hidden="true" tabindex="-1"></a><span class="do">## put our response variable into a vector</span></span>
<span id="cb688-10"><a href="predictive-modeling-with-knn.html#cb688-10" aria-hidden="true" tabindex="-1"></a>train_cat <span class="ot">&lt;-</span> train_sample_2<span class="sc">$</span>Type</span>
<span id="cb688-11"><a href="predictive-modeling-with-knn.html#cb688-11" aria-hidden="true" tabindex="-1"></a>test_cat <span class="ot">&lt;-</span> test_sample_2<span class="sc">$</span>Type</span></code></pre></div>
<p>Now that the data has been prepared for the <code>knn()</code> function in the <code>class</code> library, we fit the model with 9 nearest neighbors. The arguments to <code>knn()</code> are</p>
<ul>
<li><code>train</code>, a data set with the training data that contains only the predictors we want to use (and not other predictors or the response).</li>
<li><code>test</code>, a data set with the test data that contains only the predictors we want to use (and not other predictors or the response).</li>
<li><code>cl</code>, a vector of the response variable for the training data.</li>
<li><code>k</code>, the number of nearest neighbors.</li>
</ul>
<div class="sourceCode" id="cb689"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb689-1"><a href="predictive-modeling-with-knn.html#cb689-1" aria-hidden="true" tabindex="-1"></a><span class="do">## fit the knn model with 9 nearest neighbors</span></span>
<span id="cb689-2"><a href="predictive-modeling-with-knn.html#cb689-2" aria-hidden="true" tabindex="-1"></a>knn_mod <span class="ot">&lt;-</span> <span class="fu">knn</span>(<span class="at">train =</span> train_small, <span class="at">test =</span> test_small,</span>
<span id="cb689-3"><a href="predictive-modeling-with-knn.html#cb689-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">cl =</span> train_cat, <span class="at">k =</span> <span class="dv">9</span>)</span>
<span id="cb689-4"><a href="predictive-modeling-with-knn.html#cb689-4" aria-hidden="true" tabindex="-1"></a>knn_mod</span></code></pre></div>
<pre><code>##  [1] Ice   Fire  Fire  Fire  Fire  Fire  Steel Fire  Ice   Fire  Fire  Fire 
## [13] Fire  Ice   Ice   Steel Ice   Dark  Ice   Fire  Steel Fire  Fire  Ice  
## [25] Fire  Ice   Steel Fire  Fire  Ice   Dark  Fire  Fire  Fire  Dark  Ice  
## [37] Ice   Fire  Ice   Fire  Fire  Fire  Fire  Fire  Fire  Fire  Fire  Fire 
## [49] Ice   Fire 
## Levels: Dark Fire Ice Steel</code></pre>
<p>The output of <code>knn_mod</code> gives the predicted categories for the <strong>test</strong> sample. We can compare the predictions from the knn model with the actual pokemon <code>Type</code>s in the test sample with <code>table()</code>, which makes a confusion matrix:</p>
<div class="sourceCode" id="cb691"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb691-1"><a href="predictive-modeling-with-knn.html#cb691-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(knn_mod, test_cat) </span></code></pre></div>
<pre><code>##        test_cat
## knn_mod Dark Fire Ice Steel
##   Dark     0    3   0     0
##   Fire     6   13   7     4
##   Ice      5    5   2     1
##   Steel    0    1   0     3</code></pre>
<p>The columns of the confusion matrix give the actual Pokemon types in the test data while the rows give the predicted types from our knn model. The above table tells us that there were 0 pokemon that were Dark type that our knn model correctly classified as Dark. There were 6 pokemon that were Dark type that our knn model incorrectly classified as Fire. There were 5 pokemon that were Dark type and that our knn model incorrectly classified as Ice. In other words, correct predictions appear on the diagonal, while incorrect predictions appear on the off-diagonal.</p>
<p>One common metric used to assess overall model performance is the model’s <strong>classification rate</strong>, which is computed as the number of correct classifications divided by the total number of observations in the test data set. In this case, our classification rate is</p>
<div class="sourceCode" id="cb693"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb693-1"><a href="predictive-modeling-with-knn.html#cb693-1" aria-hidden="true" tabindex="-1"></a>(<span class="dv">0</span> <span class="sc">+</span> <span class="dv">13</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span>) <span class="sc">/</span> <span class="dv">50</span></span></code></pre></div>
<pre><code>## [1] 0.36</code></pre>
<p>Code to automatically obtain the classification rate from a confusion matrix is</p>
<div class="sourceCode" id="cb695"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb695-1"><a href="predictive-modeling-with-knn.html#cb695-1" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">table</span>(knn_mod, test_cat) </span>
<span id="cb695-2"><a href="predictive-modeling-with-knn.html#cb695-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">diag</span>(tab)) <span class="sc">/</span> <span class="fu">sum</span>(tab)</span></code></pre></div>
<pre><code>## [1] 0.36</code></pre>
<p>What does <code>diag()</code> seem to do in the code above?</p>
</div>
<div id="exercise-13-3" class="section level3" number="14.3.3">
<h3><span class="header-section-number">14.3.3</span> Exercises</h3>
<p>Exercises marked with an * indicate that the exercise has a solution at the end of the chapter at <a href="predictive-modeling-with-knn.html#solutions-13">14.5</a>.</p>
<ol style="list-style-type: decimal">
<li>Change the predictors used or change k to improve the classification rate of the model with <code>k = 9</code> and <code>Attack</code>, <code>Defense</code>, <code>HP</code>, and <code>Speed</code> as predictors.</li>
</ol>
</div>
</div>
<div id="chapexercise-13" class="section level2" number="14.4">
<h2><span class="header-section-number">14.4</span> Chapter Exercises</h2>
<p>There will be no chapter exercises for this section. Instead, we’ll devote some in-class time for you to begin work on your final project.</p>
</div>
<div id="solutions-13" class="section level2" number="14.5">
<h2><span class="header-section-number">14.5</span> Exercise Solutions</h2>
<div id="introduction-to-classification-s" class="section level3" number="14.5.1">
<h3><span class="header-section-number">14.5.1</span> Introduction to Classification S</h3>
</div>
<div id="knn-introduction-s" class="section level3" number="14.5.2">
<h3><span class="header-section-number">14.5.2</span> knn Introduction S</h3>
<ol style="list-style-type: decimal">
<li>* Consider again the toy example with just two observations in the training data set and unscaled weight and height as predictors.</li>
</ol>
<div class="sourceCode" id="cb697"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb697-1"><a href="predictive-modeling-with-knn.html#cb697-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> train_tiny, <span class="fu">aes</span>(<span class="at">x =</span> height, <span class="at">y =</span> weight, <span class="at">shape =</span> Type)) <span class="sc">+</span></span>
<span id="cb697-2"><a href="predictive-modeling-with-knn.html#cb697-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">5</span>, <span class="fu">aes</span>(<span class="at">colour =</span> Type)) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">17</span>)) <span class="sc">+</span></span>
<span id="cb697-3"><a href="predictive-modeling-with-knn.html#cb697-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">200</span>, <span class="dv">550</span>)) <span class="sc">+</span></span>
<span id="cb697-4"><a href="predictive-modeling-with-knn.html#cb697-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> newobs, <span class="at">shape =</span> <span class="dv">4</span>, <span class="at">size =</span> <span class="dv">10</span>)</span></code></pre></div>
<p><img src="13-knn_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>The actual (height, weight) coordinates of the Fire pokemon are (9, 250), the actual coordinates of the Dark pokemon are (15, 505), and the actual coordinates of the test pokemon are (15, 350). We mentioned that, visually, the pokemon looks “closer” to the Dark type pokemon. Verify that this is <strong>not</strong> the case by computing the actual distances numerically.</p>
<ol start="2" style="list-style-type: decimal">
<li>* After scaling according to the formula in this section, the coordinates (height, weight) of the Fire pokemon are (0, 0) and the coordinates of the Dark pokemon are (1, 1). (Since there are only two observations, the formula doesn’t give any output between 0 and 1 for this tiny example). The scaled coordinates for the test pokemon are (1, 0.39). Verify that, after scaling, the test pokemon is “closer” to the Dark type pokemon bu numerically computing distances.</li>
</ol>
</div>
<div id="choosing-predictors-and-k-s" class="section level3" number="14.5.3">
<h3><span class="header-section-number">14.5.3</span> Choosing Predictors and k S</h3>
</div>
</div>
<div id="rcode-13" class="section level2" number="14.6">
<h2><span class="header-section-number">14.6</span> Non-Exercise <code>R</code> Code</h2>
<div class="sourceCode" id="cb698"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb698-1"><a href="predictive-modeling-with-knn.html#cb698-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1119</span>)</span>
<span id="cb698-2"><a href="predictive-modeling-with-knn.html#cb698-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb698-3"><a href="predictive-modeling-with-knn.html#cb698-3" aria-hidden="true" tabindex="-1"></a>pokemon <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;data/pokemon_full.csv&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb698-4"><a href="predictive-modeling-with-knn.html#cb698-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Type <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Steel&quot;</span>, <span class="st">&quot;Dark&quot;</span>, <span class="st">&quot;Fire&quot;</span>, <span class="st">&quot;Ice&quot;</span>))</span>
<span id="cb698-5"><a href="predictive-modeling-with-knn.html#cb698-5" aria-hidden="true" tabindex="-1"></a>train_sample <span class="ot">&lt;-</span> pokemon <span class="sc">%&gt;%</span></span>
<span id="cb698-6"><a href="predictive-modeling-with-knn.html#cb698-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="dv">15</span>)</span>
<span id="cb698-7"><a href="predictive-modeling-with-knn.html#cb698-7" aria-hidden="true" tabindex="-1"></a>test_sample <span class="ot">&lt;-</span> <span class="fu">anti_join</span>(pokemon, train_sample)</span>
<span id="cb698-8"><a href="predictive-modeling-with-knn.html#cb698-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb698-9"><a href="predictive-modeling-with-knn.html#cb698-9" aria-hidden="true" tabindex="-1"></a>train_sample <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb698-10"><a href="predictive-modeling-with-knn.html#cb698-10" aria-hidden="true" tabindex="-1"></a>test_sample <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb698-11"><a href="predictive-modeling-with-knn.html#cb698-11" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> train_sample, <span class="fu">aes</span>(<span class="at">x =</span> Defense, <span class="at">y =</span> <span class="dv">1</span>, <span class="at">colour =</span> Type, <span class="at">shape =</span> Type)) <span class="sc">+</span></span>
<span id="cb698-12"><a href="predictive-modeling-with-knn.html#cb698-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span>  <span class="fu">theme</span>(<span class="at">axis.title.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb698-13"><a href="predictive-modeling-with-knn.html#cb698-13" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb698-14"><a href="predictive-modeling-with-knn.html#cb698-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>())</span>
<span id="cb698-15"><a href="predictive-modeling-with-knn.html#cb698-15" aria-hidden="true" tabindex="-1"></a>dialga <span class="ot">&lt;-</span> test_sample <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">63</span>)</span>
<span id="cb698-16"><a href="predictive-modeling-with-knn.html#cb698-16" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> train_sample, <span class="fu">aes</span>(<span class="at">x =</span> Defense, <span class="at">y =</span> <span class="dv">1</span>, <span class="at">colour =</span> Type, <span class="at">shape =</span> Type)) <span class="sc">+</span></span>
<span id="cb698-17"><a href="predictive-modeling-with-knn.html#cb698-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">4</span>) <span class="sc">+</span>  <span class="fu">theme</span>(<span class="at">axis.title.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb698-18"><a href="predictive-modeling-with-knn.html#cb698-18" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.text.y=</span><span class="fu">element_blank</span>(),</span>
<span id="cb698-19"><a href="predictive-modeling-with-knn.html#cb698-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks.y=</span><span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb698-20"><a href="predictive-modeling-with-knn.html#cb698-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dialga, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">shape =</span> <span class="dv">4</span>, <span class="at">size =</span> <span class="dv">7</span>)</span>
<span id="cb698-21"><a href="predictive-modeling-with-knn.html#cb698-21" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> train_sample, <span class="fu">aes</span>(<span class="at">x =</span> Defense, <span class="at">y =</span> Speed, <span class="at">colour =</span> Type, <span class="at">shape =</span> Type)) <span class="sc">+</span></span>
<span id="cb698-22"><a href="predictive-modeling-with-knn.html#cb698-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb698-23"><a href="predictive-modeling-with-knn.html#cb698-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> dialga, <span class="at">colour =</span> <span class="st">&quot;black&quot;</span>, <span class="at">shape =</span> <span class="dv">4</span>, <span class="at">size =</span> <span class="dv">5</span>)</span>
<span id="cb698-24"><a href="predictive-modeling-with-knn.html#cb698-24" aria-hidden="true" tabindex="-1"></a>train_tiny <span class="ot">&lt;-</span> train_sample <span class="sc">%&gt;%</span> <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>)</span>
<span id="cb698-25"><a href="predictive-modeling-with-knn.html#cb698-25" aria-hidden="true" tabindex="-1"></a>newobs <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">height =</span> <span class="dv">15</span>, <span class="at">weight =</span> <span class="dv">350</span>, <span class="at">Type =</span> <span class="st">&quot;Unknown&quot;</span>)</span>
<span id="cb698-26"><a href="predictive-modeling-with-knn.html#cb698-26" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> train_tiny, <span class="fu">aes</span>(<span class="at">x =</span> height, <span class="at">y =</span> weight, <span class="at">shape =</span> Type)) <span class="sc">+</span></span>
<span id="cb698-27"><a href="predictive-modeling-with-knn.html#cb698-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">5</span>, <span class="fu">aes</span>(<span class="at">colour =</span> Type)) <span class="sc">+</span> <span class="fu">xlim</span>(<span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">17</span>)) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="dv">200</span>, <span class="dv">550</span>)) <span class="sc">+</span></span>
<span id="cb698-28"><a href="predictive-modeling-with-knn.html#cb698-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> newobs, <span class="at">shape =</span> <span class="dv">4</span>, <span class="at">size =</span> <span class="dv">10</span>)</span>
<span id="cb698-29"><a href="predictive-modeling-with-knn.html#cb698-29" aria-hidden="true" tabindex="-1"></a>train_sample <span class="sc">%&gt;%</span> <span class="fu">select</span>(weight) <span class="sc">%&gt;%</span> <span class="fu">head</span>()</span>
<span id="cb698-30"><a href="predictive-modeling-with-knn.html#cb698-30" aria-hidden="true" tabindex="-1"></a>train_sample <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">weight_s =</span> (weight <span class="sc">-</span> <span class="fu">min</span>(weight)) <span class="sc">/</span> </span>
<span id="cb698-31"><a href="predictive-modeling-with-knn.html#cb698-31" aria-hidden="true" tabindex="-1"></a>                          (<span class="fu">max</span>(weight) <span class="sc">-</span> <span class="fu">min</span>(weight))) <span class="sc">%&gt;%</span></span>
<span id="cb698-32"><a href="predictive-modeling-with-knn.html#cb698-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(weight_s) <span class="sc">%&gt;%</span></span>
<span id="cb698-33"><a href="predictive-modeling-with-knn.html#cb698-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb698-34"><a href="predictive-modeling-with-knn.html#cb698-34" aria-hidden="true" tabindex="-1"></a><span class="do">## ?across</span></span>
<span id="cb698-35"><a href="predictive-modeling-with-knn.html#cb698-35" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pander)</span>
<span id="cb698-36"><a href="predictive-modeling-with-knn.html#cb698-36" aria-hidden="true" tabindex="-1"></a>train_sample <span class="sc">%&gt;%</span></span>
<span id="cb698-37"><a href="predictive-modeling-with-knn.html#cb698-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> (.x <span class="sc">-</span> <span class="fu">min</span>(.x)) <span class="sc">/</span></span>
<span id="cb698-38"><a href="predictive-modeling-with-knn.html#cb698-38" aria-hidden="true" tabindex="-1"></a>                                 (<span class="fu">max</span>(.x) <span class="sc">-</span> <span class="fu">min</span>(.x)))) <span class="sc">%&gt;%</span></span>
<span id="cb698-39"><a href="predictive-modeling-with-knn.html#cb698-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb698-40"><a href="predictive-modeling-with-knn.html#cb698-40" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb698-41"><a href="predictive-modeling-with-knn.html#cb698-41" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">11232020</span>) <span class="do">## run this line so that you get the same </span></span>
<span id="cb698-42"><a href="predictive-modeling-with-knn.html#cb698-42" aria-hidden="true" tabindex="-1"></a><span class="do">## results as I do!</span></span>
<span id="cb698-43"><a href="predictive-modeling-with-knn.html#cb698-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb698-44"><a href="predictive-modeling-with-knn.html#cb698-44" aria-hidden="true" tabindex="-1"></a><span class="do">## scale the quantitative predictors</span></span>
<span id="cb698-45"><a href="predictive-modeling-with-knn.html#cb698-45" aria-hidden="true" tabindex="-1"></a>pokemon_scaled <span class="ot">&lt;-</span> pokemon <span class="sc">%&gt;%</span></span>
<span id="cb698-46"><a href="predictive-modeling-with-knn.html#cb698-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), <span class="sc">~</span> (.x <span class="sc">-</span> <span class="fu">min</span>(.x)) <span class="sc">/</span></span>
<span id="cb698-47"><a href="predictive-modeling-with-knn.html#cb698-47" aria-hidden="true" tabindex="-1"></a>                                 (<span class="fu">max</span>(.x) <span class="sc">-</span> <span class="fu">min</span>(.x)))) </span>
<span id="cb698-48"><a href="predictive-modeling-with-knn.html#cb698-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb698-49"><a href="predictive-modeling-with-knn.html#cb698-49" aria-hidden="true" tabindex="-1"></a>train_sample_2 <span class="ot">&lt;-</span> pokemon_scaled <span class="sc">%&gt;%</span></span>
<span id="cb698-50"><a href="predictive-modeling-with-knn.html#cb698-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="dv">70</span>)</span>
<span id="cb698-51"><a href="predictive-modeling-with-knn.html#cb698-51" aria-hidden="true" tabindex="-1"></a>test_sample_2 <span class="ot">&lt;-</span> <span class="fu">anti_join</span>(pokemon_scaled, train_sample_2)</span>
<span id="cb698-52"><a href="predictive-modeling-with-knn.html#cb698-52" aria-hidden="true" tabindex="-1"></a><span class="do">## install.packages(&quot;class&quot;)</span></span>
<span id="cb698-53"><a href="predictive-modeling-with-knn.html#cb698-53" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(class)</span>
<span id="cb698-54"><a href="predictive-modeling-with-knn.html#cb698-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb698-55"><a href="predictive-modeling-with-knn.html#cb698-55" aria-hidden="true" tabindex="-1"></a><span class="do">## create a data frame that only has the predictors</span></span>
<span id="cb698-56"><a href="predictive-modeling-with-knn.html#cb698-56" aria-hidden="true" tabindex="-1"></a><span class="do">## that we will use</span></span>
<span id="cb698-57"><a href="predictive-modeling-with-knn.html#cb698-57" aria-hidden="true" tabindex="-1"></a>train_small <span class="ot">&lt;-</span> train_sample_2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(HP, Attack, Defense, Speed)</span>
<span id="cb698-58"><a href="predictive-modeling-with-knn.html#cb698-58" aria-hidden="true" tabindex="-1"></a>test_small <span class="ot">&lt;-</span> test_sample_2 <span class="sc">%&gt;%</span> <span class="fu">select</span>(HP, Attack, Defense, Speed)</span>
<span id="cb698-59"><a href="predictive-modeling-with-knn.html#cb698-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb698-60"><a href="predictive-modeling-with-knn.html#cb698-60" aria-hidden="true" tabindex="-1"></a><span class="do">## put our response variable into a vector</span></span>
<span id="cb698-61"><a href="predictive-modeling-with-knn.html#cb698-61" aria-hidden="true" tabindex="-1"></a>train_cat <span class="ot">&lt;-</span> train_sample_2<span class="sc">$</span>Type</span>
<span id="cb698-62"><a href="predictive-modeling-with-knn.html#cb698-62" aria-hidden="true" tabindex="-1"></a>test_cat <span class="ot">&lt;-</span> test_sample_2<span class="sc">$</span>Type</span>
<span id="cb698-63"><a href="predictive-modeling-with-knn.html#cb698-63" aria-hidden="true" tabindex="-1"></a><span class="do">## fit the knn model with 9 nearest neighbors</span></span>
<span id="cb698-64"><a href="predictive-modeling-with-knn.html#cb698-64" aria-hidden="true" tabindex="-1"></a>knn_mod <span class="ot">&lt;-</span> <span class="fu">knn</span>(<span class="at">train =</span> train_small, <span class="at">test =</span> test_small,</span>
<span id="cb698-65"><a href="predictive-modeling-with-knn.html#cb698-65" aria-hidden="true" tabindex="-1"></a>               <span class="at">cl =</span> train_cat, <span class="at">k =</span> <span class="dv">9</span>)</span>
<span id="cb698-66"><a href="predictive-modeling-with-knn.html#cb698-66" aria-hidden="true" tabindex="-1"></a>knn_mod</span>
<span id="cb698-67"><a href="predictive-modeling-with-knn.html#cb698-67" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(knn_mod, test_cat) </span>
<span id="cb698-68"><a href="predictive-modeling-with-knn.html#cb698-68" aria-hidden="true" tabindex="-1"></a>(<span class="dv">0</span> <span class="sc">+</span> <span class="dv">13</span> <span class="sc">+</span> <span class="dv">2</span> <span class="sc">+</span> <span class="dv">3</span>) <span class="sc">/</span> <span class="dv">50</span></span>
<span id="cb698-69"><a href="predictive-modeling-with-knn.html#cb698-69" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">table</span>(knn_mod, test_cat) </span>
<span id="cb698-70"><a href="predictive-modeling-with-knn.html#cb698-70" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">diag</span>(tab)) <span class="sc">/</span> <span class="fu">sum</span>(tab)</span></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="strings-with-stringr.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
